
public class BlackjackDealer {


	public double playBlackjack(BlackjackPlayer player, int numGames){
		double avg=0; //player's score / # of games;

		for (int i=0; i<numGames; i++){
			BlackjackHand dealer = new BlackjackHand();
			BlackjackHand playerHand = new BlackjackHand();
			PlayingCard card = new PlayingCard();
			PlayingCard card2 = new PlayingCard();

			dealer.addCard(card);

			card = new PlayingCard();
			playerHand.addCard(card);
			playerHand.addCard(card2);

			while (playerHand.handValue()<=21 && player.hit(dealer, playerHand) ){
				card = new PlayingCard();
				playerHand.addCard(card);
				if (playerHand.handValue()>21){ // player bust 
					player.playerBusts(playerHand);
					player.dealerWins(dealer, playerHand);

				}
			}

			if (playerHand.handValue()<=21){
				while (dealer.handValue()<17){
					card = new PlayingCard();
					dealer.addCard(card);
					player.dealerHit(dealer);
					if (dealer.handValue()>21){ // dealer bust 
						player.dealerBusts(dealer);
						player.playerWins(playerHand, dealer);
					}
				}
				// if player wins
				if ( (playerHand.handValue()==21) && (dealer.handValue()<21) ) {
					player.playerWins(playerHand, dealer);
				}  else if ( (dealer.handValue()<21) && (playerHand.handValue() > dealer.handValue()) ){
					player.playerWins(playerHand, dealer);
				}
				// if dealer wins
				if ( (dealer.handValue()==21) && (playerHand.handValue()<21)) {
					player.dealerWins(dealer, playerHand);
				} else if ( (dealer.handValue() <21) && (dealer.handValue() > playerHand.handValue()) ){
					player.dealerWins(dealer, playerHand);
				}
				// if tie
				if ( (playerHand.handValue()<=21) && (playerHand.handValue() == dealer.handValue())){
					player.playerTies(playerHand, dealer);
				}
			}

			if ( ((playerHand.handValue()==21) && (dealer.handValue()!=21)) || (dealer.handValue()>21) ){
				avg++;
			} else if ( (playerHand.handValue()<21) && (playerHand.handValue()>dealer.handValue()) ){
				avg++;
			}
			if (dealer.handValue()==playerHand.handValue()){
				avg+=.5;
			} 
			//          System.out.println("--------------------------");
		}
		return avg/numGames;
	}
}
